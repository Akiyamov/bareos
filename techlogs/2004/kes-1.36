              Technical notes on version 1.36  
                        Kern Sibbald

General:

Changes to 1.36.1:
24Nov04
- Take Dan's fix to the fix_postgresql_tables (thanks Dan)
- Increase Maximum Concurrent Jobs to 20 in SD and FD!
- Fix improper handling of autochanger Volumes that are not
  marked InChanger.
22Nov04
- Update authentication failure message to indicate possible
  problem with Maximum Concurrent Jobs. Add to doc too.
- Commit PostgreSQL BIGINT fix -- apparently some people didn't
  get it.
- Do not use a slot unless it is InChanger in the autochanger
  code, otherwise autochanger gets upset not finding the Volume.
21Nov04
- Make authentication timeout compile time configurable.
  The value is set in src/baconfig.h
- Fix removing items from watchdog queue, which apparently
  screwed up if there was more than one item.
- Rework mediaformat part of manual to separate out old
  tape format for easier reading.
- Add a lot of debug code to the authentication code.
- Add seconds to the start/end times printed in the job report.
19Nov04
- Fix mutex deadlock in dequeue of messages.
- Add debug code to FD authorization.
18Nov04
- Increase authentication timeouts to 10 minutes.
15Nov04
- Fix cancel bug in FD on /lib/tls with zero pid in
  pthread_kill.
- Add date/time to all messages.
- Make Qmsg use time message was queued rather than time
  printed.
- Indent job output two spaces.
13Nov04
- Fix web page links for new manual.
- Grant postgresql permission to cdimages.
- Correct crash after "list nextvol" "list media" bug 160
12Nov04
- Fix scripts/Makefile.in missing ;\  -- thanks Martin
- A bit of work on btape to keep if from going into infinite
  loops when things do not work well, and to print a bit
  better info.
11Nov04
- JobDefs Storage resource completely overrode anything
  specified in Job resource -- bug 159 -- fixed.
- Fix syntax of renaming postgresql per Dan.
- Add working_directory to be /tmp for wx_console.
10Nov04
- Allow both a JobId and a filename or list of files to be
  specified on a restore command line.
- Save old mtx-changer before installing new one: bug 156
- Fix errors in CDROM file pointed out by Scott.
09Nov04
- Fix exepath when Bacula executed without path.
- Move test for socket libraries for Solaris in configure.in
  before tcp wrapper tests so that linking works.
- Add "make copy-static-fd" to makefile in CDROM file to
  copy existing static fd to CDROM rather than building it.
08Nov04
- More doc updates
- Fix ps command for OpenBSD
- Rework the creation of indexes for SQL -- fall back
  to the old code, but document what can be added.
06Nov04
- Add new Daemon message handler in default DIR conf.
05Nov04
- Fix Seg Fault with -D100 in bpipe.c.    
- Fix Seg Fault in run specifying a JobId.
- Make mail from daemon with a Messages Resource use
  the MailCommand with editing rather than the default
  sendmail.
- Replace Jmsg in dispatch_message() with Qmsg.
- Make edit_job_codes handle NULL jcr.
04Nov04
- Add M_ALERT class and put tape alerts into it.
- Fix Verify count vs found by not double counting files
  that are split across files/Volumes.
30Oct04
- Fix count returned from write_bsr_file() to handle multiple
  volumes. This fixes most cases of the Verify VolumeToCatalog.
- Cleanup a bit the make clean for the rescue cdrom and remove
  unneeded files from the CVS.
28Oct04
- Fixed acquiring a tape so that it does not block all acquires 
  when operator intervention is needed.
- Platform build script updates from Scott
- Doc updates
- Add patch to force Linux LD_ASSUME_KERNEL to avoid using the
  new /lib/tls. This is done in the startup scripts.
- Modify mtx-changer so that it checks for ONLINE while 
  waiting.
- Modify make_postgresql_tables.in so that EndBlock is stored
  as a bigint. Prevents job failures when a disk volume is
  larger than 2GB.
24Oct04
- Add grep ONLINE to wait_for_drive() in mtx-changer.in
